<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SonChat</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- User Selection -->
    <div id="user-select">
        <h1>SonChat</h1>
        <p>Select your identity</p>
        <div class="user-buttons">
            <div class="user-btn" onclick="selectUser('Dad')">
                <img src="Dad.jpg" alt="Dad">
                <span>Dad</span>
            </div>
            <div class="user-btn" onclick="selectUser('Jared')">
                <img src="Jared.jpg" alt="Jared">
                <span>Jared</span>
            </div>
            <div class="user-btn other-btn" onclick="showCustomNameInput()">
                <div class="avatar-placeholder">?</div>
                <span>Other</span>
            </div>
        </div>
        <div id="custom-name-input">
            <input type="text" id="custom-name" placeholder="Enter your name..." maxlength="20">
            <button onclick="joinWithCustomName()">Join Chat</button>
        </div>
    </div>

    <!-- Chat Screen -->
    <div id="chat-screen">
        <!-- User Sidebar -->
        <div class="user-sidebar">
            <div class="sidebar-header">
                <span>Online Users</span>
            </div>
            <div class="user-list" id="user-list">
                <!-- Users will be added here dynamically -->
            </div>
        </div>

        <!-- Main Chat Area -->
        <div class="chat-main">
            <div class="chat-header">
                <div class="avatar-placeholder" style="width:45px;height:45px;font-size:1.2rem;margin-right:15px;border-width:2px;">&#128172;</div>
                <div class="chat-header-info">
                    <h2>Group Chat</h2>
                    <div class="status" id="status-text">Online</div>
                </div>
            </div>

            <div id="messages"></div>

            <button class="decode-toggle" id="decode-toggle" onclick="toggleDecode()">
                Show Decoded
            </button>

            <div class="chat-input">
                <label for="image-upload" class="upload-btn">
                    <svg viewBox="0 0 24 24"><path d="M16.5 6v11.5c0 2.21-1.79 4-4 4s-4-1.79-4-4V5a2.5 2.5 0 0 1 5 0v10.5c0 .55-.45 1-1 1s-1-.45-1-1V6H10v9.5a2.5 2.5 0 0 0 5 0V5c0-2.21-1.79-4-4-4S7 2.79 7 5v12.5c0 3.04 2.46 5.5 5.5 5.5s5.5-2.46 5.5-5.5V6h-1.5z"/></svg>
                </label>
                <input type="file" id="image-upload" accept="image/*" style="display: none;" onchange="handleImageUpload(this)">
                <input type="text" id="message-input" placeholder="Type a message..." autocomplete="off">
                <button onclick="sendMessage()">
                    <svg viewBox="0 0 24 24"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg>
                </button>
            </div>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="script.js"></script>
</body>
</html>